name: SonarQube Quality Gate Check
description: >
  Check if a project / analysis passed the Quality Gate check
branding:
  icon: check
  color: green
runs:
  using: "composite"
  steps:
    - id: quality-gate-check
      run: $GITHUB_ACTION_PATH/script/check-quality-gate.sh ${{ inputs.scanMetadataReportFile }} ${{ inputs.onlyInformational }}
      shell: bash
inputs:
  scanMetadataReportFile:
    description: Location of the scanner metadata report file
    required: false
    default: .scannerwork/report-task.txt
  onlyInformational:
    description: |-
      Whether or not this action should fail hard if the quality gate has warning or failed. If set to true, 
      this action only returns the quality gate status (which is FAILED or WARN then). If set to false and quality gate 
      is not passed, this actions fails. Defaults to false.
    required: false
    default: 'false'
outputs:
  quality-gate-status:
    description: >
      The resulting Quality Gate Status value of PASSED, WARN or FAILED
    value: ${{ steps.quality-gate-check.outputs.quality-gate-status }}
